#include "ap_manager_test.h"
#include "ap_autotest_channel_test.h"
#include "fm_interface.h"
#include "ap_autotest_channel_test_SNR.h"

//保存位倒置的值
LEN_TYPE BitRev[LENGTH]; 

//存放实部数据
OUT_TYPE Re[LENGTH];    

//存放虚部数据
OUT_TYPE Im[LENGTH];    

//如果使用查表法求正、余弦，则定义表格
#ifdef USE_TABLE
#if LENGTH==32
//计算余弦用的表，放大了1024倍（32点FFT时用）
const short int COS_TABLE[LENGTH/2]=
{
    1024,1004,946,851,724,569,392,200,0,-200,
    -392,-569,-724,-851,-946
};

//计算正弦用的表，放大了1024倍（32点FFT时用）
const short int SIN_TABLE[LENGTH/2]=
{
    0,200,392,569,724,851,946,1004,1024,1004,
    946,851,724,569,392
};
#endif

#if LENGTH==64
//计算余弦用的表，放大了1024倍（64点FFT时用）
const short int COS_TABLE[LENGTH/2]=
{
    1024,1019,1004,980,946,903,851,792,724,650,

    569,483,392,297,200,100,0,-100,-200,-297,

    -392,-483,-569,-650,-724,-792,-851,-903,-946,-980,

    -1004,-1019
};

//计算正弦用的表，放大了1024倍（64点FFT时用）
const short int SIN_TABLE[LENGTH/2]=
{
    0,100,200,297,392,483,569,650,724,792,

    851,903,946,980,1004,1019,1024,1019,1004,980,

    946,903,851,792,724,650,569,483,392,297,

    200,100
};
#endif

#if LENGTH==128
//计算余弦用的表，放大了1024倍（128点FFT时用）
const short int COS_TABLE[LENGTH/2]=
{
    1024,1023,1019,1013,1004,993,980,964,946,926,

    903,878,851,822,792,759,724,688,650,610,

    569,526,483,438,392,345,297,249,200,150,

    100,50,0,-50,-100,-150,-200,-249,-297,-345,

    -392,-438,-483,-526,-569,-610,-650,-688,-724,-759,

    -792,-822,-851,-878,-903,-926,-946,-964,-980,-993,

    -1004,-1013,-1019,-1023
};

//计算正弦用的表，放大了1024倍（128点FFT时用）
const short int SIN_TABLE[LENGTH/2]=
{
    0,50,100,150,200,249,297,345,392,438,

    483,526,569,610,650,688,724,759,792,822,

    851,878,903,926,946,964,980,993,1004,1013,

    1019,1023,1024,1023,1019,1013,1004,993,980,964,

    946,926,903,878,851,822,792,759,724,688,

    650,610,569,526,483,438,392,345,297,249,

    200,150,100,50
};
#endif

#if LENGTH==256
//计算余弦用的表，放大了1024倍（256点FFT时用）
const short int COS_TABLE[LENGTH/2]=
{
    1024,1024,1023,1021,1019,1016,1013,1009,1004,999,

    993,987,980,972,964,955,946,936,926,915,

    903,891,878,865,851,837,822,807,792,775,

    759,742,724,706,688,669,650,630,610,590,

    569,548,526,505,483,460,438,415,392,369,

    345,321,297,273,249,224,200,175,150,125,

    100,75,50,25,0,-25,-50,-75,-100,-125,

    -150,-175,-200,-224,-249,-273,-297,-321,-345,-369,

    -392,-415,-438,-460,-483,-505,-526,-548,-569,-590,

    -610,-630,-650,-669,-688,-706,-724,-742,-759,-775,

    -792,-807,-822,-837,-851,-865,-878,-891,-903,-915,

    -926,-936,-946,-955,-964,-972,-980,-987,-993,-999,

    -1004,-1009,-1013,-1016,-1019,-1021,-1023,-1024
};

//计算正弦用的表，放大了1024倍（256点FFT时用）
const short int SIN_TABLE[LENGTH/2]=
{
    0,25,50,75,100,125,150,175,200,224,

    249,273,297,321,345,369,392,415,438,460,

    483,505,526,548,569,590,610,630,650,669,

    688,706,724,742,759,775,792,807,822,837,

    851,865,878,891,903,915,926,936,946,955,

    964,972,980,987,993,999,1004,1009,1013,1016,

    1019,1021,1023,1024,1024,1024,1023,1021,1019,1016,

    1013,1009,1004,999,993,987,980,972,964,955,

    946,936,926,915,903,891,878,865,851,837,

    822,807,792,775,759,742,724,706,688,669,

    650,630,610,590,569,548,526,505,483,460,

    438,415,392,369,345,321,297,273,249,224,

    200,175,150,125,100,75,50,25
};
#endif

#if LENGTH==512
//计算余弦用的表，放大了1024倍（512点FFT时用）
const short int COS_TABLE[LENGTH/2]=
{
    1024,1024,1024,1023,1023,1022,1021,1020,1019,1018,

    1016,1015,1013,1011,1009,1007,1004,1002,999,996,

    993,990,987,983,980,976,972,968,964,960,

    955,951,946,941,936,931,926,920,915,909,

    903,897,891,885,878,872,865,858,851,844,

    837,830,822,815,807,799,792,784,775,767,

    759,750,742,733,724,715,706,697,688,678,

    669,659,650,640,630,620,610,600,590,579,

    569,558,548,537,526,516,505,494,483,472,

    460,449,438,426,415,403,392,380,369,357,

    345,333,321,309,297,285,273,261,249,237,

    224,212,200,187,175,163,150,138,125,113,

    100,88,75,63,50,38,25,13,0,-13,

    -25,-38,-50,-63,-75,-88,-100,-113,-125,-138,

    -150,-163,-175,-187,-200,-212,-224,-237,-249,-261,

    -273,-285,-297,-309,-321,-333,-345,-357,-369,-380,

    -392,-403,-415,-426,-438,-449,-460,-472,-483,-494,

    -505,-516,-526,-537,-548,-558,-569,-579,-590,-600,

    -610,-620,-630,-640,-650,-659,-669,-678,-688,-697,

    -706,-715,-724,-733,-742,-750,-759,-767,-775,-784,

    -792,-799,-807,-815,-822,-830,-837,-844,-851,-858,

    -865,-872,-878,-885,-891,-897,-903,-909,-915,-920,

    -926,-931,-936,-941,-946,-951,-955,-960,-964,-968,

    -972,-976,-980,-983,-987,-990,-993,-996,-999,-1002,

    -1004,-1007,-1009,-1011,-1013,-1015,-1016,-1018,-1019,-1020,

    -1021,-1022,-1023,-1023,-1024,-1024
};

//计算正弦用的表，放大了1024倍（512点FFT时用）
const short int SIN_TABLE[LENGTH/2]=
{
    0,13,25,38,50,63,75,88,100,113,

    125,138,150,163,175,187,200,212,224,237,

    249,261,273,285,297,309,321,333,345,357,

    369,380,392,403,415,426,438,449,460,472,

    483,494,505,516,526,537,548,558,569,579,

    590,600,610,620,630,640,650,659,669,678,

    688,697,706,715,724,733,742,750,759,767,

    775,784,792,799,807,815,822,830,837,844,

    851,858,865,872,878,885,891,897,903,909,

    915,920,926,931,936,941,946,951,955,960,

    964,968,972,976,980,983,987,990,993,996,

    999,1002,1004,1007,1009,1011,1013,1015,1016,1018,

    1019,1020,1021,1022,1023,1023,1024,1024,1024,1024,

    1024,1023,1023,1022,1021,1020,1019,1018,1016,1015,

    1013,1011,1009,1007,1004,1002,999,996,993,990,

    987,983,980,976,972,968,964,960,955,951,

    946,941,936,931,926,920,915,909,903,897,

    891,885,878,872,865,858,851,844,837,830,

    822,815,807,799,792,784,775,767,759,750,

    742,733,724,715,706,697,688,678,669,659,

    650,640,630,620,610,600,590,579,569,558,

    548,537,526,516,505,494,483,472,460,449,

    438,426,415,403,392,380,369,357,345,333,

    321,309,297,285,273,261,249,237,224,212,

    200,187,175,163,150,138,125,113,100,88,

    75,63,50,38,25,13
};
#endif

#if LENGTH==1024
//计算余弦用的表，放大了1024倍（1024点FFT时用）
const short int COS_TABLE[LENGTH/2]=
{
    1024,1024,1024,1024,1024,1024,1023,1023,1023,1022,

    1022,1022,1021,1021,1020,1020,1019,1018,1018,1017,

    1016,1016,1015,1014,1013,1012,1011,1010,1009,1008,

    1007,1006,1004,1003,1002,1000,999,998,996,995,

    993,992,990,989,987,985,983,982,980,978,

    976,974,972,970,968,966,964,962,960,958,

    955,953,951,948,946,944,941,939,936,934,

    931,928,926,923,920,917,915,912,909,906,

    903,900,897,894,891,888,885,882,878,875,

    872,868,865,862,858,855,851,848,844,841,

    837,834,830,826,822,819,815,811,807,803,

    799,796,792,788,784,779,775,771,767,763,

    759,755,750,746,742,737,733,729,724,720,

    715,711,706,702,697,692,688,683,678,674,

    669,664,659,654,650,645,640,635,630,625,

    620,615,610,605,600,595,590,584,579,574,

    569,564,558,553,548,543,537,532,526,521,

    516,510,505,499,494,488,483,477,472,466,

    460,455,449,443,438,432,426,421,415,409,

    403,398,392,386,380,374,369,363,357,351,

    345,339,333,327,321,315,309,303,297,291,

    285,279,273,267,261,255,249,243,237,230,

    224,218,212,206,200,194,187,181,175,169,

    163,156,150,144,138,132,125,119,113,107,

    100,94,88,82,75,69,63,57,50,44,

    38,31,25,19,13,6,0,-6,-13,-19,

    -25,-31,-38,-44,-50,-57,-63,-69,-75,-82,

    -88,-94,-100,-107,-113,-119,-125,-132,-138,-144,

    -150,-156,-163,-169,-175,-181,-187,-194,-200,-206,

    -212,-218,-224,-230,-237,-243,-249,-255,-261,-267,

    -273,-279,-285,-291,-297,-303,-309,-315,-321,-327,

    -333,-339,-345,-351,-357,-363,-369,-374,-380,-386,

    -392,-398,-403,-409,-415,-421,-426,-432,-438,-443,

    -449,-455,-460,-466,-472,-477,-483,-488,-494,-499,

    -505,-510,-516,-521,-526,-532,-537,-543,-548,-553,

    -558,-564,-569,-574,-579,-584,-590,-595,-600,-605,

    -610,-615,-620,-625,-630,-635,-640,-645,-650,-654,

    -659,-664,-669,-674,-678,-683,-688,-692,-697,-702,

    -706,-711,-715,-720,-724,-729,-733,-737,-742,-746,

    -750,-755,-759,-763,-767,-771,-775,-779,-784,-788,

    -792,-796,-799,-803,-807,-811,-815,-819,-822,-826,

    -830,-834,-837,-841,-844,-848,-851,-855,-858,-862,

    -865,-868,-872,-875,-878,-882,-885,-888,-891,-894,

    -897,-900,-903,-906,-909,-912,-915,-917,-920,-923,

    -926,-928,-931,-934,-936,-939,-941,-944,-946,-948,

    -951,-953,-955,-958,-960,-962,-964,-966,-968,-970,

    -972,-974,-976,-978,-980,-982,-983,-985,-987,-989,

    -990,-992,-993,-995,-996,-998,-999,-1000,-1002,-1003,

    -1004,-1006,-1007,-1008,-1009,-1010,-1011,-1012,-1013,-1014,

    -1015,-1016,-1016,-1017,-1018,-1018,-1019,-1020,-1020,-1021,

    -1021,-1022,-1022,-1022,-1023,-1023,-1023,-1024,-1024,-1024,

    -1024,-1024
};

//计算正弦用的表，放大了1024倍（1024点FFT时用）
const short int SIN_TABLE[LENGTH/2]=
{
    0,6,13,19,25,31,38,44,50,57,

    63,69,75,82,88,94,100,107,113,119,

    125,132,138,144,150,156,163,169,175,181,

    187,194,200,206,212,218,224,230,237,243,

    249,255,261,267,273,279,285,291,297,303,

    309,315,321,327,333,339,345,351,357,363,

    369,374,380,386,392,398,403,409,415,421,

    426,432,438,443,449,455,460,466,472,477,

    483,488,494,499,505,510,516,521,526,532,

    537,543,548,553,558,564,569,574,579,584,

    590,595,600,605,610,615,620,625,630,635,

    640,645,650,654,659,664,669,674,678,683,

    688,692,697,702,706,711,715,720,724,729,

    733,737,742,746,750,755,759,763,767,771,

    775,779,784,788,792,796,799,803,807,811,

    815,819,822,826,830,834,837,841,844,848,

    851,855,858,862,865,868,872,875,878,882,

    885,888,891,894,897,900,903,906,909,912,

    915,917,920,923,926,928,931,934,936,939,

    941,944,946,948,951,953,955,958,960,962,

    964,966,968,970,972,974,976,978,980,982,

    983,985,987,989,990,992,993,995,996,998,

    999,1000,1002,1003,1004,1006,1007,1008,1009,1010,

    1011,1012,1013,1014,1015,1016,1016,1017,1018,1018,

    1019,1020,1020,1021,1021,1022,1022,1022,1023,1023,

    1023,1024,1024,1024,1024,1024,1024,1024,1024,1024,

    1024,1024,1023,1023,1023,1022,1022,1022,1021,1021,

    1020,1020,1019,1018,1018,1017,1016,1016,1015,1014,

    1013,1012,1011,1010,1009,1008,1007,1006,1004,1003,

    1002,1000,999,998,996,995,993,992,990,989,

    987,985,983,982,980,978,976,974,972,970,

    968,966,964,962,960,958,955,953,951,948,

    946,944,941,939,936,934,931,928,926,923,

    920,917,915,912,909,906,903,900,897,894,

    891,888,885,882,878,875,872,868,865,862,

    858,855,851,848,844,841,837,834,830,826,

    822,819,815,811,807,803,799,796,792,788,

    784,779,775,771,767,763,759,755,750,746,

    742,737,733,729,724,720,715,711,706,702,

    697,692,688,683,678,674,669,664,659,654,

    650,645,640,635,630,625,620,615,610,605,

    600,595,590,584,579,574,569,564,558,553,

    548,543,537,532,526,521,516,510,505,499,

    494,488,483,477,472,466,460,455,449,443,

    438,432,426,421,415,409,403,398,392,386,

    380,374,369,363,357,351,345,339,333,327,

    321,315,309,303,297,291,285,279,273,267,

    261,255,249,243,237,230,224,218,212,206,

    200,194,187,181,175,169,163,156,150,144,

    138,132,125,119,113,107,100,94,88,82,

    75,69,63,57,50,44,38,31,25,19,

    13,6
};
#endif
#endif

void load_win_data(void)
{

}
